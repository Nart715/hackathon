syntax = "proto3";

package account;
option go_package ="proto/account";

enum Action {
  DEPOSIT = 0;
  CREDIT  = 1;
}

message CreateAccountRequest {
  int64 accountId = 1;
}

message CreateAccountResponse {
  int64 code = 1;
  string message = 2;
  AccountData data = 3;
}

message AccountData {
  int64 accountId = 1;
  int64 balance = 2;
  int64 createdAt = 3;
  int64 updatedAt = 4;
}

message DepositAccountRequest {
  int64 accountId = 1;
  int64 amount = 2;
}

message DepositAccountResponse {
  int64 code = 1;
  string message = 2;
  AccountData data = 3;
 }

message BalanceChangeRequest {
  int64 accountId = 1;
  int64 amount = 2;
  int64 action = 3;
  int64 transactionId = 4;
}

message BalanceChangeResponse {
  int64 code = 1;
  string message = 2;
  AccountData data = 3;
 }

service AccountService {
  rpc CreateAccount(CreateAccountRequest) returns (CreateAccountResponse);
  rpc BalanceChange(BalanceChangeRequest) returns (BalanceChangeResponse);
}
